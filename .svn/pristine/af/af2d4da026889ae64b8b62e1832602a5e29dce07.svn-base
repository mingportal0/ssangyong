<%@page import="com.zim.member.MemberVO"%>
<%@ page language="java" contentType="text/html; charset=UTF-8"
    pageEncoding="UTF-8" isELIgnored="false"%>
<%@ taglib uri="http://www.opensymphony.com/sitemesh/decorator" prefix="decorator" %>
<%@ taglib prefix="c" uri="http://java.sun.com/jsp/jstl/core" %>
<%
	MemberVO user = (MemberVO)session.getAttribute("user");
	request.setAttribute("user", user);
%>
<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1">
<style type="text/css">

</style>
<!-- 위 3개의 메타 태그는 *반드시* head 태그의 처음에 와야합니다; 어떤 다른 콘텐츠들은 반드시 이 태그들 *다음에* 와야 합니다 -->    
<link rel="stylesheet" href="/ZIMZALABIM/js/jquery-ui.css" >
<link rel="shortcut icon" href="/ZIMZALABIM/image/favicon.ico">
<!-- 부트스트랩 -->
<link href="/ZIMZALABIM/css/bootstrap.min.css" rel="stylesheet">
<script type="text/javascript" src="/ZIMZALABIM/js/service/HuskyEZCreator.js" charset="utf-8"></script>
<title>ZIMZALABIM</title>
<script src="/ZIMZALABIM/js/jquery-1.12.4.js"></script>
<script src="/ZIMZALABIM/js/jquery-ui.js"></script>
<script src="/ZIMZALABIM/js/popper.min.js"></script>
<!-- 모든 컴파일된 플러그인을 포함합니다 (아래), 원하지 않는다면 필요한 각각의 파일을 포함하세요 -->
<script src="/ZIMZALABIM/js/bootstrap.min.js"></script>	
<script src="/ZIMZALABIM/js/plugins.js"></script>
<script src="/ZIMZALABIM/js/active.js"></script>
<!-- jquery valdation -->
<script src="/ZIMZALABIM/js/jquery.validate.js"></script>
<script src="/ZIMZALABIM/js/messages_ko.js"></script>
<script src="/ZIMZALABIM/js/additional-methods.js"></script>
<!-- //jquery valdation -->
<!-- Core Style CSS -->
<link rel="stylesheet" href="/ZIMZALABIM/css/core-style.css">
<link rel="stylesheet" href="/ZIMZALABIM/css/style.css">
</head>
<body>
    <div id="frame" class="row">		
		<div class="main-content-wrapper d-flex clearfix">
			<div class="col-md-8 col-md-offset-2">
				<form name="loginFrm" id="loginFrm" action="/ZIMZALABIM/member/member.do" method="post">
					<input type="hidden" name="login_div" id="login_div"  />
					<div class="col-md-3">
						<!-- Mobile Nav (max width 767px)-->
				        <div class="mobile-nav">
				            <!-- Navbar Brand -->
				            <div class="amado-navbar-brand">
				                <a href="/ZIMZALABIM/mainpage/mainpage_view.jsp"><h1>ZIMZALABIM</h1></a>
				            </div>
				            <!-- Navbar Toggler -->
				            <div class="amado-navbar-toggler">
				                <span></span><span></span><span></span>
				            </div>
				        </div>
				
				        <!-- Header Area Start -->
				        <header class="header-area clearfix">
				            <!-- Close Icon -->
				            <div class="nav-close">
				                <i class="fa fa-close" aria-hidden="true"></i>
				            </div>
				            <!-- Logo -->
				            <div class="logo">
				                <a href="/ZIMZALABIM/mainpage/mainpage_view.jsp"><h1>ZIMZALABIM</h1></a>
				            </div>
				            <!-- Amado Nav -->
				            <nav class="amado-nav">
				                <ul>
				                    <li class="active"><a href="/ZIMZALABIM/mainpage/mainpage_view.jsp">Home</a></li>
				                    <li><a href="/ZIMZALABIM/listall/listall.do?work_div=do_totalCategory_select">Shop</a></li>
				                    <li><a href="/ZIMZALABIM/join/join.do?work_div=do_retrieve">MY PAGE</a></li>
				                </ul>
				            </nav>
				            <!-- Button Group -->
				            <div class="amado-btn-group mt-30 mb-30">
				                <a href="#" class="btn amado-btn mb-15">Login</a>
				                <a href="#" class="btn amado-btn active">Writing</a>
				            </div>
				            <!-- Cart Menu -->
				            <div class="cart-fav-search mb-100">
				                <a href="/ZIMZALABIM/wishlist/wishlist.do?work_div=do_retrieve" class="fav-nav"><img src="/ZIMZALABIM/img/core-img/favorites.png" alt=""> Favourite</a>
				                <a href="" class="search-nav"><img src="/ZIMZALABIM/img/core-img/search.png" alt=""> Search</a>
				            </div>
				            <!-- Social Button -->
				            <div class="social-info d-flex justify-content-between">
				                <a href="#"><i class="fa fa-pinterest" aria-hidden="true"></i></a>
				                <a href="#"><i class="fa fa-instagram" aria-hidden="true"></i></a>
				                <a href="#"><i class="fa fa-facebook" aria-hidden="true"></i></a>
				                <a href="#"><i class="fa fa-twitter" aria-hidden="true"></i></a>
				            </div>
				        </header>
					</div>
				</form>	
				<div class="col-md-9">
			    	<decorator:body />
				</div>
			</div>	
		</div>
		<!-- ##### Footer Area Start ##### -->
	    <footer class="footer_area clearfix">
	        <div class="container">
	            <div class="row align-items-center">
	                <!-- Single Widget Area -->
	                <div class="col-12 col-lg-4">
	                    <div class="single_widget_area">
	                        <!-- Logo -->
	                        <div class="footer-logo mr-50">
	                            <a href="/ZIMZALABIM/mainpage/mainpage_view.jsp"><h1 style="color:#fff;">ZIMZALABIM</h1></a>
	                        </div>
	                        <!-- Copywrite Text -->
	                        <p class="copywrite"><!-- Link back to Colorlib can't be removed. Template is licensed under CC BY 3.0. -->
	Copyright &copy;<script>document.write(new Date().getFullYear());</script> All rights reserved | This template is made with <i class="fa fa-heart-o" aria-hidden="true"></i> by <a href="https://colorlib.com" target="_blank">Colorlib</a> & Re-distributed by <a href="https://themewagon.com/" target="_blank">Themewagon</a>
	<!-- Link back to Colorlib can't be removed. Template is licensed under CC BY 3.0. -->
	                    </div>
	                </div>
				</div>
			</div>
		</footer>	
	</div>
</body>
<script>
	function do_move_resiter(){
		//alert('do_move_resiter()');
		window.open("http://localhost:8080/ZIMZALABIM/member/resister/resister_view.jsp", "회원가입", "width=900, height=900, toolbar=no, menubar=no, scrollbars=no, resizable=no" );
	}
	function do_logout(){
		//alert('do_logout');
		if(false==confirm("로그아웃 하시겠습니까?"))return;
		var frm = document.loginFrm;
		frm.login_div.value = 'do_logout';
		frm.action="<c:url value='/member/member.do' />"
		frm.submit();
	}
	function goMain(){
		//alert("goMain");
		var frm = document.getElementById("loginFrm");
		frm.action ="<c:url value='/mainpage/mainpage_view.jsp' />";
		frm.submit();			
	}
	//아이디 체크 후 로그인 실험
	function login_check(){
		//messageVO 값 요청
		var data = $.ajax({
							url:"<c:url value='/member/member.json' />",
							dataType:"html",
							data:{
								"login_div":"do_login",
								"user_id":$("#user_id").val(),
								"passwd":$("#passwd").val()									
							},
							async:false
						}).responseText;
		console.log("data : "+data);
		var jData = JSON.parse(data);
		console.log("jData : "+jData[0]);
		var msgId = jData[0];
		var msgContents = jData[1];
		
		if("10"==msgId){
			alert(msgContents);
			$("#user_id").focus();
			return;
		}else if("20"==msgId){
			alert(msgContents);
			$("#passwd").focus();
			return;
		}else if("1"==msgId){
			goMain();
		}else{
			alert(msgContents);
		}
	}			
	
	$("#login_bt").on("click",function(){
		var user_id = $("#user_id").val();
		if(null == user_id || user_id.trim().length ==0){
			$("#user_id").focus();
			alert('ID를 입력하세요.');
			return;
		}
		var passwd = $("#passwd").val();
		if(null == passwd || passwd.trim().length ==0){
			$("#passwd").focus();
			alert('비번을 입력하세요.');
			return;
		}
		login_check();
	});
	
</script>
</html>